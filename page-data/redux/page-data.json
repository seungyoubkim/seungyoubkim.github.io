{"componentChunkName":"component---src-templates-blog-post-js","path":"/redux/","result":{"data":{"site":{"siteMetadata":{"title":"Seungyoub Kim Blog"}},"markdownRemark":{"id":"d389a450-b944-590a-b1bc-541fbdfb509a","excerpt":"⚠️ 해당 글의 내용과 예시 코드, 이미지는 모두 참고 자료에서 가져 와 정리 한 것입니다. 요즘 리액트로 구성 된 대부분의 서비스들은 상태 관리 라이브러리와 함께 사용되고 있습니다. 오늘은 리액트에서 사용된 상태 관리 라이브러리중 아직까지 가장 대표적이고 많이 사용되고 있는 Redux…","html":"<blockquote>\n<p>⚠️ 해당 글의 내용과 예시 코드, 이미지는 모두 참고 자료에서 가져 와 정리 한 것입니다.</p>\n</blockquote>\n<p>요즘 리액트로 구성 된 대부분의 서비스들은 상태 관리 라이브러리와 함께 사용되고 있습니다.</p>\n<p>오늘은 리액트에서 사용된 상태 관리 라이브러리중 아직까지 가장 대표적이고 많이 사용되고 있는 Redux 에 대해 알아보도록 하겠습니다.</p>\n<p>그 전에 상태 관리 라이브러리가 무엇인지 부터 알아보도록 하겠습니다.</p>\n<h1>상태 관리 라이브러리</h1>\n<hr>\n<ul>\n<li>리액트는 기본적으로 state 와 prop 을 이용해 top-down 방식으로 데이터를 관리합니다.</li>\n<li>이는 간단한 프로젝트에선 문제가 없었지만 프로젝트가 거대해질수록 다수의 컴포넌트에서 공통으로 사용되야 하는 데이터를 관리하는데에 문제가 생깁니다.</li>\n<li>이를 위해 React 에서 공식적으로 지원하는 Context API 기능이 있지만 이 또한 데이터마다 Context 를 만들고 Provider 를 제공해야하며 사용해야 할 데이터가 많으면 아래 둘중 하나의 상황이 펼쳐집니다.\n<ol>\n<li>모든 전역상태를 하나의 Context 로 관리할 시 단 하나의 상태만 변경되더라도 해당 Context 를 사용하는 모든 컴포넌트가 재렌더링을 하게 된다는 문제점이 생깁니다.</li>\n<li>또한 이를 피하기 위해 데이터마다 Context 를 따로 생성 할 시 데이터를 추가할때마다 계속해서 Provider 를 중첩해서 공급해줘야 하고 또한 컴포넌트 트리에 너무 많은 Provider 가 생겨난다는 문제점이 생깁니다.</li>\n</ol>\n</li>\n<li>위 같은 문제를 보완하기 위해 페이스북은 2014년 Flux 라는 아키텍쳐를 발표했으며 2015년 Flux 아키텍쳐를 만족하면서도 이해하기 쉬운 Redux 라는 라이브러리가 공개되며 큰 인기를 끌게 되었습니다.</li>\n<li>또한 비슷한 시기 Flux 와 비슷하지만 다른 방식으로 동작하는 Mobx 라는 라이브러리도 함께 등장하였고 Redux 만큼은 아니지만 이 또한 큰 인기를 끌며 Redux 와 Mobx 두가지가 오랜 시간동안 가장 대표적인 리액트 상태 관리 라이브러리로 널리 사용되었습니다. (Mobx 에 대해서는 추후에 자세히 알아보도록 하겠습니다)</li>\n<li>그리고 지난 2020년 5월 페이스북은 React EU 에서 Recoil 이라는 새로운 상태 관리 라이브러리를 공개하였습니다. (Recoil 에 대해서는 추후에 자세히 알아보도록 하겠습니다)</li>\n</ul>\n<h1>Flux 아키텍쳐</h1>\n<hr>\n<ul>\n<li>\n<p>React 는 그 당시 일반적이었던 MVC Framework 가 아닌 철저히 View 에만 집중한 라이브러리였습니다.</p>\n</li>\n<li>\n<p>따라서 리액트를 보완 해줄 데이터 관리 방법이 필요했는데 리액트측에서는 MVC 모델은 큰 애플리케이션일 수록 관리가 어렵고 확장이 어렵다고 판단하였습니다.</p>\n<ul>\n<li>\n<p>MVC 패턴은 아래의 이미지처럼 어떤 Action 이 일어나면 Controller 는 Model 의 데이터를 조회하거나 업데이트 하며 이에 대한 변화가 View 에 반영되는 구조로 또한 View 에서 직접 Model의 데이터에도 접근 할 수 있는 패턴입니다. (양방향 데이터 흐름)</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/826d1965b9ba4b53d41c6326e9494273/5bb8b/redux1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 23.417721518987342%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAABOUlEQVQY0yXQvWrcQBTFcT1amlS72tXcuTOjkeSVtLLX+xEbG9tgHEKaJSykCSEpkyIQCKmMsR/AlcGNmzxBirzGP3hc/LiX0xw4mclzpqMRkzxHrGLEYtUhiSaFEURs8vwXYjGi6U7GBsmVYiwUEyE7/viZN7tPbN5vsc7TdD1lrAhlpNqbIRoITce0bJiWNbHtX0qsRdWz/25F/2HJsFsxXByS7f78Y/v0l7e39yyGyMHhnOBLSl/StS2Lg4Zir+VV6Hld7zNqOua1EHXMahZZXh+xfjhn83jO8vsx2dXvOy5/3XD29RtVFZgPc6qqIcaatu2p6oifdYzqjrzu8P1AHSxeDbMYWX85YfXjlM3PMxbbNZlVRZ3DBY9xHqMecS+MOibGpj1tylzKC9G0oVVP8DFxNiCi/AdOTtS95lbywQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"redux1\"\n        title=\"redux1\"\n        src=\"/static/826d1965b9ba4b53d41c6326e9494273/f058b/redux1.png\"\n        srcset=\"/static/826d1965b9ba4b53d41c6326e9494273/c26ae/redux1.png 158w,\n/static/826d1965b9ba4b53d41c6326e9494273/6bdcf/redux1.png 315w,\n/static/826d1965b9ba4b53d41c6326e9494273/f058b/redux1.png 630w,\n/static/826d1965b9ba4b53d41c6326e9494273/5bb8b/redux1.png 749w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n</li>\n<li>\n<p>이러한 방식은 설계가 간단하고 코드 작성이 쉽다는 장점이 있지만 애플리케이션이 커질수록 Model 과 View 수는 기하급수적으로 늘어나며 금방 서로 복잡하게 얽혀버려 데이터 흐름을 파악하기도 유지보수를 하기도 어려워진다는 문제점이 발생합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8e10340aecd8bcfadfe854e4a5433505/c483d/redux2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.22784810126582%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACtElEQVQoz1WTTY/bZBSF/b+Q6AZ1yEzi2O+HncR2/O04TpxkEsfphKG0PwCxqlCXCIlC6XaomJnOtEVskFgg8X8elEBBLB6dd3V07r3nNSxbIqTGlgqpnL/fQmEJhTsY4CQFZ0F+ZBinjAYaLfrEacD8RUP1cs38x4ZwmWGaEuPr589ZbxqEVCjtYAv5LyPPQyQlVjbnNCzx8pxlqkjdUzYrn8WbHdu3j6nf7SiezDC7Nsam2RInKUIplOMcjT8wHA6IqwmfDFM64xKZFCwSyUh1WaUO61cNs+st1X3L7NkKLVyMs7MuvZ5Jv28dTQ7JLFtwWIWUNpN5hplUnI4LTryUOh9QjDpkA4vdNxsW93uq25b6+watXYxsOiOZTInzyXGHw5FHlCSEUYzv+9T1mG6Qo4qakyBnUQWchw/JVYfmy4r63QXnd3uWPz3CD8cYX7z/g4ub37i8ek+UxsRxiG0JzJ5NmXs0aw8rynmgAj4SHjoYs0lMfHHKss2Y3WzJX58zuV6R7QqMp7/+yeO737m8+oVsEpOlIVo5SOFQTQP2uxEyyvhYeDxQPtIfUwSKVH3Kqs2pft4web2ivF4RbzOMdDojKivSskLpAe7Qww9CPH/MyBuxqP1jZWS+5MQvmJch0bBLpjrsv5pSv/2M9e2exVWLF/gY4lAR20ZIiVT/P4pl9SmqhH5S0YumdMMJSRyQDzrUvsnltxvmdxcs31ywfNGilYuhHPfYvwNS66Mery0VrusQlhknXoYZT+nHBVWimQw7tLnm/NWW+qZlcfeI+bMVjhxgHBJJpdGue9QPHTykPPwUEeV0kykP/Rw/S1hmmqEwKasxi9uW5v5z5vct5dMayxT/GYp/xj1wGP+gWjvoKKUbZHT9jCBJGY8cHGERJT7Vdw3VDw2zl1uiRUq/Z/MXCcsJuTi386cAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"redux2\"\n        title=\"redux2\"\n        src=\"/static/8e10340aecd8bcfadfe854e4a5433505/f058b/redux2.png\"\n        srcset=\"/static/8e10340aecd8bcfadfe854e4a5433505/c26ae/redux2.png 158w,\n/static/8e10340aecd8bcfadfe854e4a5433505/6bdcf/redux2.png 315w,\n/static/8e10340aecd8bcfadfe854e4a5433505/f058b/redux2.png 630w,\n/static/8e10340aecd8bcfadfe854e4a5433505/c483d/redux2.png 751w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n</li>\n</ul>\n</li>\n<li>\n<p>그래서 리액트는 이에 대한 대안으로 “좀더 예측 가능하도록 코드 구조화” 라는 목적으로 “데이터 흐름이 단방향인 시스템 아키텍쳐” 인 Flux 아키텍쳐를 발표합니다.</p>\n</li>\n<li>\n<p>Flux 아키텍쳐의 구조는 아래와 같습니다</p>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ea64f98a3ab7ae69fe23e01f5098e114/3c492/redux3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 22.151898734177216%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA9klEQVQY01WQzUrDQBhF+25SxJrfJpPvm0nSNNNupNYuRC0iCIoP4qaIUBBR0IUbN7rpMx1JdOPicneHe+4gCmPSZIytGrRqEFsSBjHZ2JBnBpMXxFFKmmQYo+RdsoIoTFBnkcqipSWJUzrWIDgY4Rcrbt6/ufvYcbV5ppSMuW9xavGtp3aK1BP2dMbQzYltw3RqOX48Y/W6ZrVdUzghHEW/wPZoyfXLJ7dvX1zeb3GSMfMtpXX4tqV2glQ1Q/Xs98AJTaMsNqecPF2wfDjHWCE8jBh0M7u5qg7RksLIn3KOyf8rF0YxRvorwiBBRClU+46jpFf+ATkuqS1BAmMsAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"redux3\"\n        title=\"redux3\"\n        src=\"/static/ea64f98a3ab7ae69fe23e01f5098e114/f058b/redux3.png\"\n        srcset=\"/static/ea64f98a3ab7ae69fe23e01f5098e114/c26ae/redux3.png 158w,\n/static/ea64f98a3ab7ae69fe23e01f5098e114/6bdcf/redux3.png 315w,\n/static/ea64f98a3ab7ae69fe23e01f5098e114/f058b/redux3.png 630w,\n/static/ea64f98a3ab7ae69fe23e01f5098e114/40601/redux3.png 945w,\n/static/ea64f98a3ab7ae69fe23e01f5098e114/78612/redux3.png 1260w,\n/static/ea64f98a3ab7ae69fe23e01f5098e114/3c492/redux3.png 1300w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>이는 View 가 Store 에서 데이터를 전달받아 사용하지만 Store 의 데이터를 직접 변경 할 수 없도록 하여 데이터가 단방향으로 흐르도록 하였습니다.</li>\n<li>또한 액션이 발생할 경우 모든 데이터는 중앙 허브인 dispatcher 를 통해 흐르게 하였고, 모든 action 은 store 가 dispatcher 에게 등록해둔 callback 을 통해 모든 store 에게 전달되어 store 가 스스로 갱신을 한 다음 자신이 변경되었다고 모두에게 알리는 방식입니다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8ceb52155f056bb7d4162b7d4e7f4c41/3c492/redux4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 30.37974683544304%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABZElEQVQY01WRz2vUUBSF85cJbqqd5L2XvCQv72Wan2aGsR3aTsuAOBVBBIu6FYSCaBGk0FJa7KrQjRsRl924EP+UTyY6gotvcc8953DhelIolAz/Y6VJ8YdgIHBFw2i+6KnGm7222vfevzlPSfVvWLE0iEChI4lJFIm8x97ha158+8mr7794/P4EHaxhTEiiJaLPKJQI8VZlkQx7QqH6slBpNpwmTWKU7zOezTn4cMqT4zN2nh0i1tdJdcwwi4iERi2PkQovGPiU3YTFxwsOPn1m/uYdJtbUVUUxtDRVjTUZqc0JbI1wDbEtcC5j8+2M6fEe06N90swgfIkX3B/Qbe/z/MstL7/+4On5NVWeMO5acut40LbUhSUrS+6YlrtuhG9Lui5nejln92bBztUjzNAiBgJPBpIkMbRbuzTTGdXoITJQZMaSmQxnc6JQE8cG4zZIlxiHkhHlpKbYqignTe9ZPuU3hlv9tJ3wvEcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"redux4\"\n        title=\"redux4\"\n        src=\"/static/8ceb52155f056bb7d4162b7d4e7f4c41/f058b/redux4.png\"\n        srcset=\"/static/8ceb52155f056bb7d4162b7d4e7f4c41/c26ae/redux4.png 158w,\n/static/8ceb52155f056bb7d4162b7d4e7f4c41/6bdcf/redux4.png 315w,\n/static/8ceb52155f056bb7d4162b7d4e7f4c41/f058b/redux4.png 630w,\n/static/8ceb52155f056bb7d4162b7d4e7f4c41/40601/redux4.png 945w,\n/static/8ceb52155f056bb7d4162b7d4e7f4c41/78612/redux4.png 1260w,\n/static/8ceb52155f056bb7d4162b7d4e7f4c41/3c492/redux4.png 1300w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>Flux 에 대한 더욱 자세한 내용은 아래 아티클에서 확인하시길 바랍니다.\n<ul>\n<li><a href=\"https://bestalign.github.io/2015/10/06/cartoon-guide-to-flux/\">(번역) Flux로의 카툰 안내서</a></li>\n<li><a href=\"https://haruair.github.io/flux/docs/overview.html\">Flux | 사용자 인터페이스를 만들기 위한 어플리케이션 아키텍쳐</a></li>\n</ul>\n</li>\n</ul>\n<h1>Redux 개요</h1>\n<hr>\n<ul>\n<li>Dan Abramov 라는 개발자는 Flux 를 사용하면서 핫 리로딩(hot reloading)과 시간 여행 디버깅(time travel debugging)기능을 사용하기를 원했지만 Flux 로 처리하기에는 몇가지 문제점이 있었습니다.\n<ol>\n<li>스토어의 코드는 애플리케이션 상태를 삭제하지 않고는 리로딩(reloading)이 불가능하다.</li>\n<li>애플리케이션 상태는 매 액션마다 재기록된다.</li>\n<li>서드파티 플러그인(third-party plugin)이 들어갈 좋은 장소가 없다.</li>\n</ol>\n</li>\n<li>2015년 그는 위 문제를 해결하기 위해 Flux 구조에 Reducer 를 결합 한 Redux 를 공개했습니다.\n<ul>\n<li>Redux = (Red)ucer + Fl(ux)</li>\n</ul>\n</li>\n<li>리덕스는 아래 세가지 원칙을 가지고 있습니다.\n<ol>\n<li>Single source of truth (진실은 하나의 소스로부터)\n<ul>\n<li>The state of your whole application is stored in an object tree within a single store. (애플리케이션의 모든 상태는 하나의 스토어 안에 하나의 객체 트리 구조로 저장된다.)\n<ul>\n<li>리액트에서는 부모 컴포넌트가 자식 컴포넌트에게 데이터(상태)를 넘겨 줄 수는 있지만 이 데이터의 원천은 항상 스토어가 되어야 합니다.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>State is read-only (상태는 읽기 전용이다)\n<ul>\n<li>The only way to change the state is to emit an action, an object describing what happened. (상태를 변화시키는 유일한 방법은 무슨 일이 벌어지는 지를 묘사하는 액션 객체를 전달하는 방법뿐이다.)\n<ul>\n<li>View 는 이벤트가 일어났을 경우 액션을 리듀서로 전달 할 뿐, 직접 데이터(상태)를 변경 할 수는 없습니다.</li>\n<li>데이터의 변경은 Reducer 만이 가능하며, Reducer 이외의 공간에서는 데이터(상태)는 읽기 모드입니다.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Changes are made with pure functions (변화는 순수 함수로 작성되어야한다)\n<ul>\n<li>To specify how the state tree is transformed by actions, you write pure reducers. (액션에 의해 상태 트리가 어떻게 변화하는 지를 지정하기 위해 프로그래머는 순수 리듀서를 작성해야한다.)\n<ul>\n<li>변화를 일으키는 함수인 리듀서는 반드시 순수 함수여야 합니다.\n<ul>\n<li>순수 함수란 함수가 실행되는 곳이 어디든, 언제든 절대 외부의 상태를 변경하지 않으며 동일한 입력값에는 항상 동일한 결과값을 반환하는 함수입니다.</li>\n</ul>\n</li>\n<li>이를 위해 리듀서는 반드시 아래 세가지 규칙을 지켜야 합니다.\n<ol>\n<li>리듀서 함수는 이전 상태와, 액션 객체를 파라미터로 받습니다.</li>\n<li>이전의 상태는 절대로 건들이지 않고, 변화를 일으킨 새로운 상태 객체를 만들어서 반환합니다.</li>\n<li>똑같은 파라미터로 호출된 리듀서 함수는 언제나 똑같은 결과값을 반환해야만 합니다.</li>\n</ol>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n</li>\n</ul>\n<h1>Redux 소개</h1>\n<hr>\n<ul>\n<li>리덕스에는 아래와 같은 역할들이 있습니다.</li>\n<li>스토어(Store)\n<ul>\n<li>스토어는 애플리케이션 내의 모든 상태를 가지고 있는 역할을 합니다. (상태 트리)</li>\n<li>Flux 에선 dispatcher 가 수행하던 dispatch 역할도 스토어가 담당합니다.\n<ul>\n<li>dispatch 는 액션을 발생시키기 위해 액션 생성자 함수를 이용해 액션을 생성하고 리듀서에게 넘기도록 지시하는 일이라고 생각하면 됩니다.</li>\n</ul>\n</li>\n<li>액션이 들어오면 어떤 상태변화가 필요한지에 대한 일은 리듀서에게 위임합니다.</li>\n</ul>\n</li>\n<li>액션(Action)\n<ul>\n<li>리덕스에서 스토어의 값을 변경하기 위해선 반드시 액션을 이용해야합니다.</li>\n<li>액션은 하나의 객체로 이루어 지며 type 값을 반드시 포함해야합니다.</li>\n</ul>\n</li>\n<li>액션 생성자(Action Creator)\n<ul>\n<li>위에서 이야기한 액션을 생성하는 역할을 하는 함수입니다.</li>\n</ul>\n</li>\n<li>리듀서(Reducer)\n<ul>\n<li>액션을 받은 스토어가 현재 애플리케이션의 상태와 액션을 리듀서에게 보내면 리듀서는 해당 상태를 복사한 후 해당 복사본을 액션의 타입에 맞춰 상태를 변경하고 스토어에게 전달하는 역할을 합니다.</li>\n<li>리듀서는 상태 객체를 직접 변경하는 것이 아니라 반드시 상태 객체의 복사본을 변경 한 후 복사본을 스토어에게 넘겨줍니다.</li>\n</ul>\n</li>\n<li>구독(subscribe)\n<ul>\n<li>스토어와 뷰를 연결해 스토어의 상태가 변경 될 때 마다 해당 상태를 이용하는 뷰에게 알려줄 수 있도록 구독 역할이 필요합니다.</li>\n<li>redux 만 사용 할 경우 스토어의 subscribe 기능을 이용해 스토어의 상태가 변경 될 때 마다 특정 함수를 실행 하도록하여 사용 할 수 있습니다.</li>\n<li>react 와 함께 사용 할 경우 react-redux 라이브러리의 connect 함수나 useSelector Hook 등으로 해당 컴포넌트를 리덕스 상태에 구독 하여 사용 할 수 있습니다.</li>\n</ul>\n</li>\n</ul>\n<h1>Redux 별도 사용 예시</h1>\n<hr>\n<ul>\n<li>우선 React 와 별개로 redux 만을 사용하는 방법부터 간단하게 알아보도록 하겠습니다.</li>\n<li>아래를 따라서 redux 를 이용해 카운터 예제를 만들어봅시다. (스타일 미적용)</li>\n<li>우선 npm 과 모듈 번들러를 사용해 ES6 문법과 모듈 임포트 기능을 사용 할 수 있는 환경을 만들어주세요.</li>\n<li>그리고 npm 을 이용해 <code class=\"language-text\">redux</code> 모듈을 설치해주세요.</li>\n<li>counter 화면을 그릴 index.html 파일을 생성하고 아래와 같이 작성해주세요.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- index.html --></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>count<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>0<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span> <span class=\"token comment\">&lt;!-- 카운트 값을 출력 할 Element --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>increase<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>+5<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span> <span class=\"token comment\">&lt;!-- 누르면 count 값을 5 증가 시킬 Element --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>decrease<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>-1<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span> <span class=\"token comment\">&lt;!-- 누르면 count 값을 1 감소 시킬 Element --></span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>./index.js<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span> <span class=\"token comment\">&lt;!-- 번들러 설정에 따라 추가하지 않아도 됨 --></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<ul>\n<li>그리고 카운터 기능 코드를 작성 할 index.js 파일을 생성해주세요.</li>\n<li>이제 index.js 파일에 리덕스의 역할들을 하나씩 추가해보도록 하겠습니다. (필요한 역할은 아래와 같습니다)\n<ul>\n<li>액션 생성자 (액션을 반환)</li>\n<li>리듀서</li>\n<li>스토어</li>\n<li>구독</li>\n</ul>\n</li>\n<li>우선 아래와 같이 <code class=\"language-text\">redux 모듈</code>을 임포트 하고 <code class=\"language-text\">액션 타입 상수</code>와 <code class=\"language-text\">액션 생성자</code>를 추가해주세요.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// index.js</span>\n\n<span class=\"token comment\">// redux 모듈 임포트</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createStore <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'redux'</span>\n\n<span class=\"token comment\">// 액션 타입을 정의 한 상수</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">INCREASE</span> <span class=\"token operator\">=</span> <span class=\"token string\">'counter/INCREASE'</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">DECREASE</span> <span class=\"token operator\">=</span> <span class=\"token string\">'counter/DECREASE'</span>\n\n<span class=\"token comment\">// 액션 생성자</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">increase</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">num</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token constant\">INCREASE</span><span class=\"token punctuation\">,</span> num <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">decrease</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">num</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token constant\">DECREASE</span><span class=\"token punctuation\">,</span> num <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<ul>\n<li>그리고 아래와 같이 <code class=\"language-text\">리듀서</code> 와 <code class=\"language-text\">스토어</code> 를 추가해주세요.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// index.js</span>\n\n<span class=\"token comment\">// ...</span>\n\n<span class=\"token comment\">// 스토어의 기본 상태 값</span>\n<span class=\"token keyword\">const</span> initialState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 리듀서</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">reducer</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value <span class=\"token operator\">=</span> initialState<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// 액션 타입에 따라 새로운 상태 객체를 반환</span>\n  <span class=\"token keyword\">switch</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token constant\">INCREASE</span><span class=\"token operator\">:</span>\n\t\t\t<span class=\"token comment\">// 반드시 기존 상태 객체를 수정하는 것이 아닌 새로운 객체를 반환하여야 함.</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>value<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> value<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> action<span class=\"token punctuation\">.</span>num<span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">case</span> <span class=\"token constant\">DECREASE</span><span class=\"token operator\">:</span>\n\t\t\t<span class=\"token comment\">// 반드시 기존 상태 객체를 수정하는 것이 아닌 새로운 객체를 반환하여야 함.</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>value<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> value<span class=\"token punctuation\">.</span>count <span class=\"token operator\">-</span> action<span class=\"token punctuation\">.</span>num<span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n\t\t\t<span class=\"token comment\">// 정의 되지 않은 액션 타입일 경우 기존 객체를 그대로 반환</span>\n      <span class=\"token keyword\">return</span> value\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 위 리듀서를 사용하는 스토어 생성</span>\n<span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span>reducer<span class=\"token punctuation\">)</span></code></pre></div>\n<ul>\n<li>그리고 이제 <code class=\"language-text\">DOM 객체</code>에 접근 해 <code class=\"language-text\">사용자 이벤트</code>를 등록하고 이벤트에 맞는 <code class=\"language-text\">액션</code>을 <code class=\"language-text\">dispatch</code> 를 이용해 스토어에게 알려 리듀서에게 전달하도록 해주세요.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// index.js</span>\n\n<span class=\"token comment\">// ...</span>\n\n<span class=\"token comment\">// DOM 객체 접근</span>\n<span class=\"token keyword\">const</span> increaseDom <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'increase'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> decreaseDom <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'decrease'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// 이벤트를 등록하고 이벤트에 맞춰 dispatch 로 원하는 액션을 스토어에 전달</span>\nincreaseDom<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  store<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">increase</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\ndecreaseDom<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  store<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">decrease</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>마지막으로 스토어의 상태 값이 변경 될 시 rendering 이 일어나도록 구독하여 rendering 에서 count 값에 따라 화면이 갱신 되도록 해주세요.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// index.js</span>\n\n<span class=\"token comment\">// ...</span>\n\n<span class=\"token comment\">// DOM 객체 접근</span>\n<span class=\"token keyword\">const</span> countDom <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'count'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// 스토어의 상태 값이 변경 될 때 마다 화면을 갱신해줄 렌더링 함수</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">rendering</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> state <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> count <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> state\n  countDom<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> count\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 스토어의 상태 값을 구독하여 상태 값이 변경 될 때마다 실행시킬 함수를 스토어에 전달</span>\nstore<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span>rendering<span class=\"token punctuation\">)</span></code></pre></div>\n<ul>\n<li>위 내용을 종합한 index.js 의 전체 코드는 아래와 같습니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// index.js</span>\n\n<span class=\"token comment\">// redux 모듈 임포트</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createStore <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'redux'</span>\n\n<span class=\"token comment\">// 액션 타입을 정의 한 상수</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">INCREASE</span> <span class=\"token operator\">=</span> <span class=\"token string\">'counter/INCREASE'</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">DECREASE</span> <span class=\"token operator\">=</span> <span class=\"token string\">'counter/DECREASE'</span>\n\n<span class=\"token comment\">// 액션 생성자</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">increase</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">num</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token constant\">INCREASE</span><span class=\"token punctuation\">,</span> num <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">decrease</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">num</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token constant\">DECREASE</span><span class=\"token punctuation\">,</span> num <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// 스토어의 기본 상태 값</span>\n<span class=\"token keyword\">const</span> initialState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 리듀서</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">reducer</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value <span class=\"token operator\">=</span> initialState<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// 액션 타입에 따라 새로운 상태 객체를 반환</span>\n  <span class=\"token keyword\">switch</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token constant\">INCREASE</span><span class=\"token operator\">:</span>\n\t\t\t<span class=\"token comment\">// 반드시 기존 상태 객체를 수정하는 것이 아닌 새로운 객체를 반환하여야 함.</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>value<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> value<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> action<span class=\"token punctuation\">.</span>num<span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">case</span> <span class=\"token constant\">DECREASE</span><span class=\"token operator\">:</span>\n\t\t\t<span class=\"token comment\">// 반드시 기존 상태 객체를 수정하는 것이 아닌 새로운 객체를 반환하여야 함.</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>value<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> value<span class=\"token punctuation\">.</span>count <span class=\"token operator\">-</span> action<span class=\"token punctuation\">.</span>num<span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n\t\t\t<span class=\"token comment\">// 정의 되지 않은 액션 타입일 경우 기존 객체를 그대로 반환</span>\n      <span class=\"token keyword\">return</span> value\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 위 리듀서를 사용하는 스토어 생성</span>\n<span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span>reducer<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// DOM 객체 접근</span>\n<span class=\"token keyword\">const</span> increaseDom <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'increase'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> decreaseDom <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'decrease'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// 이벤트를 등록하고 이벤트에 맞춰 dispatch 로 원하는 액션을 스토어에 전달</span>\nincreaseDom<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  store<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">increase</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\ndecreaseDom<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  store<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">decrease</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// DOM 객체 접근</span>\n<span class=\"token keyword\">const</span> countDom <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'count'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// 스토어의 상태 값이 변경 될 때 마다 화면을 갱신해줄 렌더링 함수</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">rendering</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> state <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> count <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> state\n  countDom<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> count\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 스토어의 상태 값을 구독하여 상태 값이 변경 될 때마다 실행시킬 함수를 스토어에 전달</span>\nstore<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span>rendering<span class=\"token punctuation\">)</span></code></pre></div>\n<ul>\n<li>이제 위 코드를 구동시키면 카운터가 동작하는 것을 확인하실 수 있습니다.</li>\n</ul>\n<h1>React + Redux 사용 예시</h1>\n<hr>\n<ul>\n<li>위에서 알아본 내용으로 리덕스의 기본적인 구조에 대해 조금은 이해가 되셨을겁니다.</li>\n<li>이번엔 React 와 함께 Redux 를 사용해 투두리스트 예제를 만들어보도록 하겠습니다.</li>\n<li>그 전에 리액트와 리덕스를 함께 이용 할 때 알아두시면 좋은 패턴이 있어 먼저 알아보도록 하겠습니다.\n<ul>\n<li>바로 컴포넌트를 <code class=\"language-text\">컨테이너 컴포넌트</code>와 <code class=\"language-text\">프레젠테이셔널 컴포넌트</code>로 나눠 사용하는 패턴입니다.\n<ul>\n<li>컨테이너 컴포넌트(Container Component)\n<ul>\n<li>컨테이너 컴포넌트는 스토어와 직접 연결되어 스토어의 상태 값을 직접 전달받고 스토어에게 액션을 전달하는 역할을 하는 컴포넌트입니다.</li>\n<li>컨테이너 컴포넌트는 자신의 DOM 이나 Style 을 가지지 않고 DOM 요소를 그려줄 프레젠테이셔널 컴포넌트에게 각자 필요한 상태 값과 필요한 콜백 함수를 props 로 전달해 프레젠테이셔널은 오로지 사용만 할 수 있도록 합니다.</li>\n<li>직접적인 로직이 포함되기 때문에 재사용이 어려운 컴포넌트라고 볼 수 있습니다.</li>\n</ul>\n</li>\n<li>프레젠테이셔널 컴포넌트(Presentaional Component)\n<ul>\n<li>프레젠테이셔널 컴포넌트는 직접적으로 DOM 요소를 그리는 컴포넌트로 필요한 스토어의 상태값은 모두 상위 컨테이너 컴포넌트에게 props 로 전달받아 사용하는 컴포넌트입니다.</li>\n<li>이벤트에 따라 전달해야하는 액션도 모두 컨테이너 컴포넌트에게 props 로 전달받아 받은 함수를 콜백으로써 단순히 호출만 가능합니다.</li>\n<li>동일한 props 만 전달 받을 수 있다면 어디서나 사용이 가능하기 때문에 재사용이 가능한 컴포넌트라고 볼 수 있습니다.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>하지만 위 패턴을 반드시 이용해야 하는것은 아닙니다. (아래 예제 코드에선 위 패턴을 사용했습니다.)</li>\n</ul>\n</li>\n<li>우선 npm 과 모듈 번들러를 통해 <code class=\"language-text\">React</code> 를 사용 할 수 있는 환경을 만들어주세요.</li>\n<li>그리고 npm 을 이용해 <code class=\"language-text\">redux</code> 모듈과 <code class=\"language-text\">react-redux</code> 모듈 두개를 설치해주세요.</li>\n<li>Redux 별도 예제와 달리 이번엔 모듈을 분리해서 예제를 작성해보도록 하겠습니다.</li>\n<li>우선 리덕스 코드들을 관리 할 리덕스 모듈부터 작성하도록 하겠습니다.\n<ul>\n<li>리덕스 모듈을 분리하는 방법으론 Action 과 Reducer 를 각각 분리하는 방법이 있고 각 Reducer 마다 필요한 Action 들은 한 파일에 함께 작성하는 방법이 있습니다.</li>\n<li>각 Reducer 마다 필요한 Action 들을 한 파일에 작성하는 방식을 <a href=\"https://github.com/erikras/ducks-modular-redux\">Ducks 패턴</a>이라고 합니다. (이번 예제에선 Ducks 패턴을 사용했습니다.)</li>\n</ul>\n</li>\n<li>reducers 라는 폴더를 만들고 그 안에 todo.js 파일을 생성한 후 <code class=\"language-text\">리듀서</code>와 <code class=\"language-text\">액션 생성 함수</code>를 추가해주세요.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// reducers/todo.js</span>\n\n<span class=\"token comment\">// 액션 타입 상수</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">ADD_TODO</span> <span class=\"token operator\">=</span> <span class=\"token string\">'todo/ADD_TODO'</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">REMOVE_TODO</span> <span class=\"token operator\">=</span> <span class=\"token string\">'todo/REMOVE_TODO'</span>\n\n<span class=\"token comment\">// 각 투두마다 고유한 id 가 필요한데 리듀서는 순수함수여야 하기 때문에 리듀서에서 아이디를 생성하거나 변경하면 안 됨.</span>\n<span class=\"token comment\">// 이를 해결하기 위한 방법으로 id 를 액션 생성자 함수에서 결정해서 리듀서에 넘겨주는 방법이 있음.</span>\n<span class=\"token keyword\">let</span> id <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n\n<span class=\"token comment\">// 액션 생성자 함수</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">addTodo</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">todo</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token constant\">ADD_TODO</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token operator\">++</span>id<span class=\"token punctuation\">,</span>\n  todo\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">removeTodo</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">id</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token constant\">REMOVE_TODO</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> id\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// 스토어의 기본 상태 값</span>\n<span class=\"token keyword\">const</span> initialState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">todos</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n\t\t<span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">content</span><span class=\"token operator\">:</span> <span class=\"token string\">'Redux 공부'</span> <span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 리듀서</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">todo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state <span class=\"token operator\">=</span> initialState<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token constant\">ADD_TODO</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">todos</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>state<span class=\"token punctuation\">.</span>todos<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">todo</span><span class=\"token operator\">:</span> action<span class=\"token punctuation\">.</span>todo<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> action<span class=\"token punctuation\">.</span>id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">case</span> <span class=\"token constant\">REMOVE_TODO</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">todos</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>todos<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">todo</span> <span class=\"token operator\">=></span> todo<span class=\"token punctuation\">.</span>id <span class=\"token operator\">!==</span> action<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> state\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>위 같이 기능별로 분류한 리듀서를 서브 리듀서라고 합니다.</li>\n<li>위에 작성한 서브 리듀서를 루트 리듀서로 합쳐주는 코드를 reducers/index.js 파일에 작성합니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// reducers/index.js</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> combineReducers <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"redux\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> todo <span class=\"token keyword\">from</span> <span class=\"token string\">'./todo'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">combineReducers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  todo\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<ul>\n<li>그리고 최상위 React Element 를 직접적으로 DOM Element 내에 삽입시켜주는 코드가 있는 index.js 내에서 스토어를 생성하고 react-redux 모듈의 Provider 로 최상위 컴포넌트를 감싸 내부의 모든 컴포넌트에서 리덕스 스토어에 접근 할 수 있도록 해줍니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// index.js</span>\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createStore <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'redux'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Provider <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span>\n\n<span class=\"token keyword\">import</span> rootReducer <span class=\"token keyword\">from</span> <span class=\"token string\">'./src/store/modules'</span>\n\n<span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./src/App'</span>\n\n<span class=\"token comment\">// rootReducer 를 사용 할 스토어를 생성</span>\n<span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span>rootReducer<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// Provider 로 최상위 컴포넌트인 App 컴포넌트를 감싸 내부 컴포넌트에서 특정 store 가 사용 가능하도록 함</span>\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Provider</span></span> <span class=\"token attr-name\">store</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>store<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Provider</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">,</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'app'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// App.js</span>\n\n<span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Fragment <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n\n<span class=\"token keyword\">import</span> TodoContainer <span class=\"token keyword\">from</span> <span class=\"token string\">'./containers/TodoContainer'</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">TodoContainer</span></span> <span class=\"token punctuation\">/></span></span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App</code></pre></div>\n<ul>\n<li>이제 containers 폴더를 만들고 위에서 만든 store 값을 사용 할 컨테이너 컴포넌트를 TodoContainers.js 로 만들어주세요.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// containers/TodoContainers.js</span>\n\n<span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> connect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> addTodo<span class=\"token punctuation\">,</span> removeTodo <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../store/modules/todo'</span>\n\n<span class=\"token keyword\">import</span> TodoList <span class=\"token keyword\">from</span> <span class=\"token string\">'../components/TodoList'</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">TodoContainer</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token comment\">// 아래에서 HOC 방식으로 props 에 주입 한 리덕스 상태 값과 액션 디스패치 콜백 함수</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> todos<span class=\"token punctuation\">,</span> addTodo<span class=\"token punctuation\">,</span> removeTodo <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n\t\t\t<span class=\"token comment\">// 스토어에서 가져온 상태 값과 함수를 프레젠테이셔널 컴포넌트에 props 로 전달</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">TodoList</span></span> <span class=\"token attr-name\">todos</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>todos<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">addTodo</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>addTodo<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">removeTodo</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>removeTodo<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 리덕스 스토어의 상태 값중 컴포넌트에서 사용 할 상태 값 정의</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">mapStateToProps</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">todos</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>todo<span class=\"token punctuation\">.</span>todos\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// 컴포넌트에서 사용 할 액션을 디스패치 하는 콜백 함수 정의</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">mapDispatchToProps</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">dispatch</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">addTodo</span><span class=\"token operator\">:</span> <span class=\"token parameter\">todo</span> <span class=\"token operator\">=></span> <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">addTodo</span><span class=\"token punctuation\">(</span>todo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">removeTodo</span><span class=\"token operator\">:</span> <span class=\"token parameter\">id</span> <span class=\"token operator\">=></span> <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">removeTodo</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// 위에서 정의 한 상태 값과 함수를 props 로 사용 가능하게 컴포넌트에 HOC 방식으로 주입</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>\n  mapStateToProps<span class=\"token punctuation\">,</span>\n  mapDispatchToProps\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>TodoContainer<span class=\"token punctuation\">)</span></code></pre></div>\n<ul>\n<li>컨테이너 컴포넌트를 함수형 컴포넌트가 아닌 클래스형 컴포넌트로 만들었습니다.\n<ul>\n<li>React Hook 이 등장하기 전까지는 데이터를 다루는 컨테이너 컴포넌트는 클래스형 컴포넌트로 만드는것이 일반적이었습니다.</li>\n</ul>\n</li>\n<li>store 를 리액트 컴포넌트에서 사용하기 위해선 기본적으로 react-redux 모듈의 connect 함수를 이용해서 HOC 방식으로 스토어의 값과 액션을 디스패치 하는 콜백 함수를 props 로 받아오는 방식이 필요합니다.\n<ul>\n<li>React Hook 을 이용하면 HOC 방식을 이용하지 않고 스토어의 상태 값과 dispatch 콜백 함수를 사용 할 수 있습니다. (이는 아래에서 알아보도록 하겠습니다.)</li>\n</ul>\n</li>\n<li>그리고 HOC 방식으로 주입 받은 상태 값과 dispatch 콜백 함수를 프레젠테이셔널 컴포넌트에게 props 로 전달했습니다.</li>\n<li>이제 components 폴더를 만들고 TodoList.js 라는 이름의 프레젠테이셔널 컴포넌트를 작성해 보도록 하겠습니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// components/TodoList.js</span>\n\n<span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Fragment<span class=\"token punctuation\">,</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">TodoList</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>todos<span class=\"token punctuation\">,</span> addTodo<span class=\"token punctuation\">,</span> removeTodo<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Fragment</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">InputTodo</span></span> <span class=\"token attr-name\">addTodo</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>addTodo<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>\n        todos<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">todo</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Todo</span></span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>todo<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">todo</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>todo<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">removeTodo</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>removeTodo<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Fragment</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">InputTodo</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>addTodo<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>text<span class=\"token punctuation\">,</span> setText<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>text<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token function\">setText</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token function\">addTodo</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">추가</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Todo</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">todo</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>content<span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> removeTodo<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token punctuation\">{</span>content<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">removeTodo</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">제거</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> TodoList</code></pre></div>\n<ul>\n<li>위 처럼 프레젠테이셔널 컴포넌트까지 작성을 해주고 props 로 전달받은 값들을 사용하도록 해주면 투두 예제가 작동하는 것을 확인하실 수 있습니다.</li>\n<li>여기에 추가로 React Hook 을 이용해서 HOC 없이 컨테이너 컴포넌트를 작성하는 방법을 위 프로젝트에 카운터 코드를 추가하면서 알아보도록 하겠습니다.</li>\n<li>우선 카운터에 사용 할 리덕스 모듈을 아래와 같이 생성하고 루트 리듀서에 카운터 서브 리듀서를 추가해주세요.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// reducers/counter.js</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token constant\">INCREASE</span> <span class=\"token operator\">=</span> <span class=\"token string\">'counter/INCREASE'</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">DECREASE</span> <span class=\"token operator\">=</span> <span class=\"token string\">'counter/DECREASE'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">increase</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">count</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token constant\">INCREASE</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> count\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">decrease</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">count</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token constant\">DECREASE</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> count\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> initialState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">counter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state <span class=\"token operator\">=</span> initialState<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token constant\">INCREASE</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> action<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">case</span> <span class=\"token constant\">DECREASE</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">-</span> action<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> state\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// reducers/index.js</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> combineReducers <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"redux\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> todo <span class=\"token keyword\">from</span> <span class=\"token string\">'./todo'</span>\n<span class=\"token keyword\">import</span> counter <span class=\"token keyword\">from</span> <span class=\"token string\">'./counter'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">combineReducers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  todo<span class=\"token punctuation\">,</span>\n\tcounter\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<ul>\n<li>이미 루트 리듀서를 이용해 스토어를 만드는 코드는 모두 작성이 되어있으니 바로 컨테이너 컴포넌트를 작성하면 됩니다. containers 폴더 안에 CounterContainer.js 파일을 만들어 아래와 같이 작성해주세요.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// containers/CounterContainer.js</span>\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useDispatch<span class=\"token punctuation\">,</span> useSelector <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> decrease<span class=\"token punctuation\">,</span> increase <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../store/modules/counter'</span>\n\n<span class=\"token keyword\">import</span> Counter <span class=\"token keyword\">from</span> <span class=\"token string\">'../components/Counter'</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">CounterContainer</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// 스토어의 상태 값중 사용 할 상태 값을 추출하고 액션이 디스패치 될 시 다시 selector 를 실행 할 수 있도록 스토어를 구독</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> count <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>counter<span class=\"token punctuation\">.</span>count\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token comment\">// dispatch 함수 자체를 받아와 직접 dispatch 에 액션을 넘기는 콜백 함수를 작성</span>\n  <span class=\"token keyword\">const</span> dispatch <span class=\"token operator\">=</span> <span class=\"token function\">useDispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onIncrease</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">count</span> <span class=\"token operator\">=></span> <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">increase</span><span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onDecrease</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">count</span> <span class=\"token operator\">=></span> <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">decrease</span><span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Counter</span></span> <span class=\"token attr-name\">count</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onIncrease</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onIncrease<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onDecrease</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onDecrease<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> CounterContainer</code></pre></div>\n<ul>\n<li>react-reudx 모듈이 제공하는 useSelector, useDispatch Hook 함수를 이용하여 스토어의 상태 값과 스토어의 dispatch 함수를 사용 하도록 가져 올 수 있습니다.</li>\n<li>useSelector 함수는 위에서 이야기한 connect 함수의 mapStateToProps 인자와 비슷한 역할을 하지만 몇가지 다른점이 있습니다.\n<ul>\n<li>\n<p>리턴값으로 객체가 아닌 값도 넘길 수 있기에 아래 처럼도 사용이 가능합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> count <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> state<span class=\"token punctuation\">.</span>counter<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n<li>\n<p>또한 액션이 디스패치 되면 이전 결과와 얕은 비교를 진행해 다를 경우 무조건 리렌더링을 진행합니다. (기본적으로 === 비교)</p>\n<ul>\n<li>이 때문에 useSelector 가 객체를 반환하는 경우 항상 새로운 객체를 반환하기 때문에 객체 값이 변하지 않더라도 리렌더링이 진행 돼 성능에 악영향을 미칠 수 있습니다.</li>\n<li>위 문제를 해결하기 위해 아래와 같은 방법을 사용해 개선이 가능합니다.\n<ul>\n<li>단일 필드를 리턴하는 useSelector를 여러번 사용한다.</li>\n<li>Reselect, 또는 복수의 값을 하나의 객체로 리턴해주는 memoized selector 라이브러리를 사용</li>\n<li>useSelector 의 두번째 인자로 비교 함수를 전달 해 비교하도록 한다. (react-redux 에서 제공하는 shallowEqual 함수를 이용해도 됨)</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>useDispatch 함수는 직접 dispatch 함수를 불러와 원하는 액션을 스토어에 디스패치 하는 콜백 함수를 만들 수 있도록 제공해줍니다.</li>\n<li>이렇게 컨테이너 컴포넌트를 작성 한 후 아래처럼 프레젠테이셔널 컴포넌트까지 작성해주면 카운터 예제도 완성입니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// components/Counter.js</span>\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Counter</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">,</span> increase<span class=\"token punctuation\">,</span> decrease<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">increase</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">+1</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">decrease</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">-1</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Counter</code></pre></div>\n<h1>Redux Middleware</h1>\n<hr>\n<ul>\n<li>\n<p>리덕스에는 미들웨어를 추가 할 수 있는 기능이 있습니다.</p>\n</li>\n<li>\n<p>미들웨어는 액션이 디스패치되어 리듀서로 넘어가는 중간에 함수를 실행시켜 추가적인 작업을 할 수 있는 기능입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7012283f853e7d5216faf11268d3d648/c587f/redux5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 16.455696202531648%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA6UlEQVQI1yXMv0uHQBzG8WeKfkAgpOAXoiWH1tYWBwcHl8b+h6D/oKkgKNr6L6yxgpYoFyd1MDlXEbkOPO88BF0+IQ3P8n7BgyAIQt/3z6qqAmPsVGv92XXde9u2b1LKbyHEFRFhGIYnpdQX5/xVa/0hpXyp6/pgNdd19wD8L4oiCsPwZ4UkSS7meaY8zylNU+r7nrTWz6tN0/Q7jiOVZUlCCFqWheI4PgGwa1nWBoAH4BC2bR95nrfJsgxFURxLKe+NMbfGmBul1GPTNOfrIef8Uin1oLVe+x3n/Joxtg8AjuPsANgGsPUHe7yTgJ3i1gMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"redux5\"\n        title=\"redux5\"\n        src=\"/static/7012283f853e7d5216faf11268d3d648/f058b/redux5.png\"\n        srcset=\"/static/7012283f853e7d5216faf11268d3d648/c26ae/redux5.png 158w,\n/static/7012283f853e7d5216faf11268d3d648/6bdcf/redux5.png 315w,\n/static/7012283f853e7d5216faf11268d3d648/f058b/redux5.png 630w,\n/static/7012283f853e7d5216faf11268d3d648/40601/redux5.png 945w,\n/static/7012283f853e7d5216faf11268d3d648/78612/redux5.png 1260w,\n/static/7012283f853e7d5216faf11268d3d648/c587f/redux5.png 1863w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n</li>\n<li>\n<p>미들웨어 기능을 사용해 아래와 같은 각종 작업들을 진행 할 수 있습니다.</p>\n<ul>\n<li>특정 조건에 따라 액션이 무시되게 만들 수 있습니다.</li>\n<li>액션을 콘솔에 출력하거나, 서버쪽에 로깅을 할 수 있습니다.</li>\n<li>액션이 디스패치 됐을 때 이를 수정해서 리듀서에게 전달되도록 할 수 있습니다.</li>\n<li>특정 액션이 발생했을 때 이에 기반하여 다른 액션이 발생되도록 할 수 있습니다.</li>\n<li>특정 액션이 발생했을 때 특정 자바스크립트 함수를 실행시킬 수 있습니다.</li>\n</ul>\n</li>\n<li>\n<p>리덕스에서 미들웨어가 가장 많이 사용되는 부분은 비동기 작업 처리 부분입니다.</p>\n</li>\n<li>\n<p>미들웨어는 누구든지 만들어 사용이 가능하지만 일반적으로는 미들웨어 모듈을 설치해 사용합니다.</p>\n</li>\n<li>\n<p>리덕스 미들웨어 모듈중 가장 많이 사용되는 라이브러리는 redux-thunk 와 redux-saga 로 비동기작업을 처리 할 수 있습니다.</p>\n</li>\n</ul>\n<h1>미들웨어 직접 만들기</h1>\n<hr>\n<ul>\n<li>미들웨어는 아래와 같은 <a href=\"https://redux.js.org/tutorials/fundamentals/part-4-store#middleware\">템플릿</a>을 사용하는 하나의 함수입니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">middleware</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">store</span> <span class=\"token operator\">=></span> <span class=\"token parameter\">next</span> <span class=\"token operator\">=></span> <span class=\"token parameter\">action</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 하고 싶은 작업...</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 위와 동일</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">middleware</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">store</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">next</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 하고 싶은 작업...</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>첫번째 store 인자는 스토어의 인스턴스로 store 의 dispatch, getState, subscribe 등의 기능을 사용 할 수 있게 해줍니다.</li>\n<li>두번째 next 인자는 현재 액션을 다음 미들웨어로 넘기는 함수로 <code class=\"language-text\">next(action)</code> 형태로 사용됩니다. (다음 미들웨어가 없다면 리듀서에게 전달됩니다.)</li>\n<li>세번째 action 인자는 현재 처리되고 있는 액션 객체입니다.</li>\n<li>아래는 디스패치 된 액션을 출력하는 미들웨어 예시 코드입니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">myLogger</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">store</span> <span class=\"token operator\">=></span> <span class=\"token parameter\">next</span> <span class=\"token operator\">=></span> <span class=\"token parameter\">action</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 먼저 액션을 출력합니다.</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token function\">next</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 다음 미들웨어 (또는 리듀서) 에게 액션을 전달합니다.</span>\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 여기서 반환하는 값은 dispatch(action)의 결과물이 됩니다. 기본: undefined</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> myLogger<span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>그리고 미들웨어를 적용하기 위해선 아래와 같이 스토어를 생성하는 createStore 함수의 두번째 인자로 applyMiddleware 함수에 원하는 미들웨어를 인자로 담아 전달해주면 됩니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// ...</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createStore<span class=\"token punctuation\">,</span> applyMiddleware <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'redux'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> myLogger <span class=\"token keyword\">from</span> <span class=\"token string\">'./middlewares/myLogger'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span>rootReducer<span class=\"token punctuation\">,</span> <span class=\"token function\">applyMiddleware</span><span class=\"token punctuation\">(</span>myLogger<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ...</span></code></pre></div>\n<ul>\n<li>또한 위에서 이야기 했듯이 미들웨어에서 리듀서로 전달 될 액션을 수정하여 전달도 가능하기 때문에 아래와 같이 미들웨어를 이용해 디스패치에 액션 타입을 객체가 아닌 함수를 받도록 하여 미들웨어에서 해당 함수를 실행 시키도록 할 수도 있습니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">thunk</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">store</span> <span class=\"token operator\">=></span> <span class=\"token parameter\">next</span> <span class=\"token operator\">=></span> <span class=\"token parameter\">action</span> <span class=\"token operator\">=></span>\n  <span class=\"token keyword\">typeof</span> action <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span>\n    <span class=\"token operator\">?</span> <span class=\"token function\">action</span><span class=\"token punctuation\">(</span>store<span class=\"token punctuation\">.</span>dispatch<span class=\"token punctuation\">,</span> store<span class=\"token punctuation\">.</span>getState<span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">:</span> <span class=\"token function\">next</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">)</span></code></pre></div>\n<ul>\n<li>위 함수는 디스패치에 함수가 넘어 올 경우 함수를 실행시키고 next(action) 을 하지 않기 때문에 리듀서로 디스패치가 넘어가지 않습니다.</li>\n<li>thunk 는 함수 내에서 처리 이후 새로운 dispatch 를 넘기는 방법으로 사용됩니다.</li>\n<li>thunk 미들웨어를 등록하면 아래와 같이 디스패치에 함수를 넘길 수 있습니다. (함수가 두개의 새로운 디스패치를 리듀서에 전달)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">myThunk</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">dispatch<span class=\"token punctuation\">,</span> getState</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'HELLO'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'BYE'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">myThunk</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>위와 유사한 방법으로 만들어둔 미들웨어 모듈이 redux-thunk 입니다.</li>\n<li>redux-thunk 미들웨어를 이용하여 아래와 같이 디스패치 함수를 만들어 비동기 처리를 할 수 있습니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 액션 생성자 함수의 역할까지 함께 수행</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getPosts</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">async</span> <span class=\"token parameter\">dispatch</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token constant\">GET_POSTS</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 요청이 시작됨</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> posts <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> postsAPI<span class=\"token punctuation\">.</span><span class=\"token function\">getPosts</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// API 호출</span>\n    <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token constant\">GET_POSTS_SUCCESS</span><span class=\"token punctuation\">,</span> posts <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 성공</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token constant\">GET_POSTS_ERROR</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">error</span><span class=\"token operator\">:</span> e <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 실패</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>요즘 가장 핫한 redux middleware 는 redux-saga 입니다.</li>\n<li>redux-saga 는 다양한 기능을 제공하는 만큼 사용법이 조금 복잡하여 다음 글에서 따로 살펴보도록 하겠습니다.</li>\n</ul>\n<h2>이후 작성 할 내용</h2>\n<hr>\n<ol>\n<li><a href=\"/redux-saga\">redux-saga</a></li>\n<li>Recoil</li>\n<li>Mobx</li>\n</ol>\n<h2>참고 자료</h2>\n<hr>\n<ul>\n<li><a href=\"https://velog.io/@wooder2050/%EB%A6%AC%EB%8D%95%EC%8A%A4Redux%EB%8A%94-%EC%99%9C-%EC%93%B0%EB%8A%94-%EA%B1%B4%EB%8D%B0\">리덕스(Redux)는 왜 쓰는 건데!?</a></li>\n<li><a href=\"https://bestalign.github.io/2015/10/26/cartoon-intro-to-redux/\">(번역) Redux로의 카툰 안내서</a></li>\n<li><a href=\"https://react.vlpt.us/redux/\">6장. 리덕스</a></li>\n</ul>","frontmatter":{"title":"Redux","date":"January 16, 2021","description":"리덕스에 대해 알아봅니다."}},"previous":{"fields":{"slug":"/parcel/"},"frontmatter":{"title":"Parcel"}},"next":{"fields":{"slug":"/js-iterator/"},"frontmatter":{"title":"자바스크립트 Iterator"}}},"pageContext":{"id":"d389a450-b944-590a-b1bc-541fbdfb509a","previousPostId":"2aad0391-b4a1-5e9d-b867-3c67818833a9","nextPostId":"3398ddfa-d702-5e72-9ca8-00e1fb88b2cf"}},"staticQueryHashes":["2841359383","3257411868"]}